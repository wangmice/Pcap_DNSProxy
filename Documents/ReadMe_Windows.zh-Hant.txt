Pcap_DNSProxy 專案的 GitHub 頁面：
https://github.com/chengr28/Pcap_DNSProxy

Pcap_DNSProxy 專案的 Sourceforge 頁面：
https://sourceforge.net/projects/pcap-dnsproxy


* 更多程式以及配置的詳細情況，參見 ReadMe(..).txt


-------------------------------------------------------------------------------


安裝方法（需要以管理員身份進行）：

1.訪問 https://www.winpcap.org 下載並以管理員許可權安裝 WinPcap
  * WinPcap 只需要安裝一次，以前安裝過最新版本或以後更新本工具時請從第 2 步開始操作
  * 如果 WinPcap 提示已安裝舊版本無法繼續時，參見 FAQ 中 運行結果分析 一節
  * 安裝時自啟動選項對工具的運行沒有影響，本工具直接調用 WinPcap API 不需要經過伺服器程式

2.訪問 https://github.com/chengr28/Pcap_DNSProxy/releases 將二進位可執行檔包下載到本地
  * Windows 版本的 Pcap_DNSProxy 在二進位可執行檔包的 Windows 目錄內，可將整個目錄單獨抽出運行

3.打開下載回來的二進位可執行檔包，將 Windows 目錄解壓到磁片的任意位置
  * 目錄所在位置和程式檔案名可以隨意更改，建議將本專案放置在一個獨立的目錄內
  * 設定檔需要使用固定的檔案名（更多詳細情況參見下文 功能和技術 一節）

4.確定工具目錄的名稱和路徑後進入目錄內，右鍵以管理員身份(Vista 以及更新版本)或直接以管理員登錄按兩下(XP/2003)運行 ServiceControl.bat
  * 輸入 1 並回車，即選擇 "1: Install service" 安裝服務
  * 批次處理會將程式註冊系統服務，並進行防火牆測試，每次開機服務都將自動啟動
  * 此時 Windows 系統會詢問是否同意程式訪問網路，請將 "私人網路絡" 以及 "公用網路" 都勾上並確認

5.請按照下文 正常工作查看方法 一節，先對程式是否在正常工作進行測試再修改網路設定！

6.打開 "網路和共用中心" - "更改配接器設置" 選擇 "本地連接" 或 "無線連接" 或 "寬頻連線"
  * 右擊 "屬性" - "Internet協定(TCP/IP)"(XP/2003) 或 "Internet協定版本4(IPv4)"(Vista 以及更新版本) - "屬性" - 勾選 "使用下面的 DNS 伺服器位址"
  * 在 "首選DNS伺服器" 內填入 "127.0.0.1"（不含引號） 確定保存並退出即可
  * 如果需要使用 IPv6 協定的本機伺服器
    * 右擊 "屬性" - "Internet協定版本6(IPv6)" - "屬性" - 勾選 "使用下面的 DNS 伺服器位址"
    * 在 "首選DNS伺服器" 內填入 "::1"（不含引號） 確定保存並退出即可
  * 請務必確保只填入這兩個地址，填入其它地址可能會導致系統選擇其它 DNS 服務器繞過程序的代理
  * 注意：建議將 "本地連接" 和 "無線連接" 以及 "寬頻連線" 全部修改！


-------------------------------------------------------------------------------


重啟服務方法（需要以管理員身份進行）：
1.右鍵以管理員身份(Vista 以及更新版本)或直接以管理員登錄按兩下(XP/2003)運行 ServiceControl.bat
2.輸入 5 並回車，即選擇 "5: Restart service" 立刻重啟服務


小更新的方法（需要以管理員身份進行，如果設定檔的 Version 有更新需要進行大更新）：
1.提前下載好新版本的 Pcap_DNSProxy（亦即 安裝方法 中第 2 步），更新過程可能會造成網域名稱解析短暫中斷
2.右鍵以管理員身份(Vista 以及更新版本)或直接以管理員登錄按兩下(XP/2003)運行 ServiceControl.bat
3.輸入 4 並回車，即選擇 "4: Stop service" 停止服務
4.將目錄內的所有可執行檔刪除
5.將新版本的 Pcap_DNSProxy 的所有可執行檔解壓到相同位置
6.右鍵以管理員身份(Vista 以及更新版本)或直接以管理員登錄按兩下(XP/2003)運行 ServiceControl.bat
7.輸入 3 並回車，即選擇 "3: Start service" 啟動服務


大更新的方法（需要以管理員身份進行，切勿直接覆蓋，否則可能會造成不可預料的錯誤）：
1.提前下載好新版本的 Pcap_DNSProxy（亦即 安裝方法 中第 2 步），更新過程可能會造成網域名稱解析短暫中斷
2.如果設定檔的 Version 有更新，則需要備份好所有設定檔的自訂內容
3.右鍵以管理員身份(Vista 以及更新版本)或直接以管理員登錄按兩下(XP/2003)運行 ServiceControl.bat
4.輸入 2 並回車，即選擇 "2: Uninstall service" 卸載服務
5.將整個 Pcap_DNSProxy 程式的目錄刪除。 注意 Windows 防火牆可能會留有允許程式訪問網路的資訊，卸載服務後又變更了程式的目錄則可能需要使用註冊表清理工具清理
6.將新版本的 Pcap_DNSProxy 解壓到任何位置（亦即 安裝方法 中第 3 步）
7.將設定檔的自訂內容加回新版本設定檔裡相應的區域內
8.按照 安裝方法 中第 4 步重新部署 Pcap_DNSProxy


安全模式下的使用方法（需要以管理員身份進行）：
* 程式具備在安全模式下運行的能力，在安全模式下右鍵以管理員身份直接運行程式
* 直接運行模式有主控台視窗，關閉程式時直接關閉主控台視窗即可


卸載方法（需要以管理員身份進行）：
1.按照 安裝方法 中第 6 步還原 DNS 網域名稱伺服器位址配置
2.右鍵以管理員身份(Vista 以及更新版本)或直接以管理員登錄按兩下(XP/2003)運行 ServiceControl.bat
  * 輸入 2 並回車，即選擇 "2: Uninstall service" 卸載服務
  * 注意：Windows 防火牆可能會留有允許程式訪問網路的資訊，故卸載後可能需要使用註冊表清理工具清理
  * 轉移工具目錄路徑不需要卸載服務，先停止服務轉移，轉移完成後重新開機服務即可


-------------------------------------------------------------------------------


正常工作查看方法：

1.打開命令提示符
  * 在開始功能表或直接 Win + R 調出 運行 ，輸入 cmd 並回車
  * 開始功能表 - 程式/所有程式 - 附件 - 命令提示符
2.輸入 nslookup www.google.com 127.0.0.1 或者 nslookup www.google.com ::1 並回車
3.運行結果應類似：

   >nslookup www.google.com
    服务器:  pcap-dnsproxy.server（視設定檔設置的值而定，參見下文 設定檔詳細參數說明 一節）
    Address:  127.0.0.1（視所在網路環境而定，本地監聽協定為 IPv6 時為 ::1）

    非权威应答:
    名称:    www.google.com
    Addresses: ……（IP 位址或地址清單）


4.如非以上結果，請移步 FAQ 文檔中 運行結果分析 一節
